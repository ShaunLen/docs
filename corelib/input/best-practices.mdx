---
title: "Input Best Practices"
icon: "star"
description: "Recommended patterns for using the Enhanced Input system"
---

<Info>
This page collects best practices and recommended patterns for working with the Enhanced Input system.
</Info>

---

## Action design

### Use descriptive action names

<CardGroup cols={2}>
  <Card title="Good" icon="check" color="#16A34A">
    - `jump`
    - `fire_primary`
    - `interact`
    - `move`
    - `toggle_inventory`
  </Card>
  <Card title="Avoid" icon="xmark" color="#EF4444">
    - `action1`
    - `space`
    - `lmb`
    - `a`
  </Card>
</CardGroup>

<Note>
Action names describe *intent*, not *input*. "jump" not "space".
</Note>

### Group related actions

```csharp
// Good: Actions grouped by function
// Combat context
"fire_primary", "fire_secondary", "reload", "aim"

// Movement context
"move", "jump", "crouch", "sprint"

// UI context
"navigate", "select", "back", "tab_next"
```

---

## Context management

### Keep contexts focused

<Tabs>
  <Tab title="Good">
    ```csharp
    // Focused, single-purpose contexts
    "gameplay"   // Core movement and combat
    "menu"       // Menu navigation
    "dialogue"   // Dialogue interactions
    "vehicle"    // Vehicle controls
    ```
  </Tab>
  <Tab title="Avoid">
    ```csharp
    // Overly broad context
    "everything" // Contains all actions
    ```
  </Tab>
</Tabs>

### Balance push/pop calls

```csharp
public class InventoryUI : Panel
{
    public void Open()
    {
        InputSystem.PushContext("inventory");
        Show();
    }

    public void Close()
    {
        Hide();
        InputSystem.PopContext(); // Always match push with pop
    }

    protected override void OnDestroy()
    {
        // Ensure context is popped even if destroyed unexpectedly
        if (IsVisible)
        {
            InputSystem.PopContext();
        }
    }
}
```

<Warning>
Forgetting to pop contexts is a common bug. Use try/finally or cleanup in OnDestroy.
</Warning>

---

## Code patterns

### Centralise input handling

<Tabs>
  <Tab title="Recommended">
    ```csharp
    // Single class handles all player input
    public class PlayerInputHandler : Component
    {
        public event Action OnJump;
        public event Action OnFire;
        public Vector2 MoveInput { get; private set; }

        protected override void OnUpdate()
        {
            MoveInput = InputSystem.GetAxis2D("move");

            if (InputSystem.IsActionPressed("jump"))
                OnJump?.Invoke();

            if (InputSystem.IsActionPressed("fire"))
                OnFire?.Invoke();
        }
    }

    // Other systems subscribe
    public class PlayerMovement : Component
    {
        private PlayerInputHandler _input;

        protected override void OnStart()
        {
            _input = Components.Get<PlayerInputHandler>();
        }

        protected override void OnUpdate()
        {
            Move(_input.MoveInput);
        }
    }
    ```
  </Tab>
  <Tab title="Avoid">
    ```csharp
    // Input queries scattered everywhere
    public class PlayerMovement : Component
    {
        protected override void OnUpdate()
        {
            var move = InputSystem.GetAxis2D("move");
            // ...
        }
    }

    public class PlayerCombat : Component
    {
        protected override void OnUpdate()
        {
            if (InputSystem.IsActionPressed("fire"))
            // ...
        }
    }

    public class PlayerUI : Component
    {
        protected override void OnUpdate()
        {
            if (InputSystem.IsActionPressed("menu"))
            // ...
        }
    }
    ```
  </Tab>
</Tabs>

### Use constants for action IDs

```csharp
public static class InputActions
{
    // Movement
    public const string Move = "move";
    public const string Jump = "jump";
    public const string Sprint = "sprint";

    // Combat
    public const string Fire = "fire";
    public const string Aim = "aim";
    public const string Reload = "reload";

    // UI
    public const string Menu = "menu";
    public const string Interact = "interact";
}

// Usage
if (InputSystem.IsActionPressed(InputActions.Jump))
{
    PerformJump();
}
```

---

## Performance

### Minimise per-frame queries

```csharp
// Good: Query once, use result
protected override void OnUpdate()
{
    var moveInput = InputSystem.GetAxis2D("move");

    ApplyMovement(moveInput);
    UpdateAnimation(moveInput);
    PlayFootsteps(moveInput);
}

// Avoid: Repeated queries
protected override void OnUpdate()
{
    ApplyMovement(InputSystem.GetAxis2D("move"));
    UpdateAnimation(InputSystem.GetAxis2D("move"));
    PlayFootsteps(InputSystem.GetAxis2D("move"));
}
```

### Use events for non-critical input

```csharp
// For actions that don't need frame-perfect response
public class ScreenshotHandler : Component
{
    protected override void OnStart()
    {
        // Event-based: checked asynchronously
        InputSystem.OnActionPressed("screenshot", TakeScreenshot);
    }

    private void TakeScreenshot()
    {
        // Screenshot timing is not frame-critical
        CaptureScreen();
    }
}
```

---

## Rebinding

### Provide sensible defaults

```csharp
// Good defaults that work for most players
new InputActionDefinition
{
    Id = "jump",
    DisplayName = "Jump",
    DefaultBindings = new[]
    {
        new InputBinding("Space"),           // Keyboard
        new InputBinding("Gamepad_A")        // Controller
    }
};
```

### Protect system actions

```csharp
// Mark non-rebindable actions
new InputActionDefinition
{
    Id = "screenshot",
    IsRebindable = false,  // Can't be changed by player
    DefaultBindings = new[] { new InputBinding("F12") }
};
```

---

## Accessibility

<CardGroup cols={2}>
  <Card title="Support multiple bindings" icon="layer-group">
    Allow multiple keys per action for different needs
  </Card>
  <Card title="Offer toggle options" icon="toggle-on">
    Let players toggle hold actions like aim/sprint
  </Card>
  <Card title="Large dead zones" icon="circle">
    Provide options for larger stick dead zones
  </Card>
  <Card title="Customisable sensitivity" icon="sliders">
    Let players adjust look sensitivity
  </Card>
</CardGroup>

```csharp
public class AccessibilitySettings
{
    public bool ToggleAim { get; set; }
    public bool ToggleSprint { get; set; }
    public float StickDeadZone { get; set; } = 0.15f;
    public float LookSensitivity { get; set; } = 1.0f;
}
```

---

## Testing

### Make input injectable

```csharp
// Interface for testing
public interface IInputProvider
{
    bool IsActionPressed(string actionId);
    Vector2 GetAxis2D(string actionId);
}

// Production implementation
public class InputSystemProvider : IInputProvider
{
    public bool IsActionPressed(string actionId)
        => InputSystem.IsActionPressed(actionId);

    public Vector2 GetAxis2D(string actionId)
        => InputSystem.GetAxis2D(actionId);
}

// Test implementation
public class MockInputProvider : IInputProvider
{
    public Dictionary<string, bool> PressedActions = new();
    public Dictionary<string, Vector2> AxisValues = new();

    public bool IsActionPressed(string actionId)
        => PressedActions.GetValueOrDefault(actionId);

    public Vector2 GetAxis2D(string actionId)
        => AxisValues.GetValueOrDefault(actionId);
}
```

---

## Summary

| Area | Best Practice |
|------|--------------|
| **Naming** | Descriptive, intent-based action names |
| **Contexts** | Focused, single-purpose contexts |
| **Code** | Centralised input handling |
| **Performance** | Query once per frame |
| **Rebinding** | Sensible defaults, protected system actions |
| **Accessibility** | Multiple bindings, toggle options |
| **Testing** | Injectable input for unit tests |

---

## Common mistakes to avoid

<Warning>
**Don't:**
- Hardcode key codes in gameplay code
- Forget to pop pushed contexts
- Query the same action multiple times per frame
- Mix Enhanced Input with raw input APIs
- Make screenshot/menu keys rebindable
</Warning>

---

## Related pages

<CardGroup cols={2}>
  <Card title="Runtime Usage" icon="code" href="/corelib/input/runtime-usage">
    Using input in code
  </Card>
  <Card title="Debugging" icon="bug" href="/corelib/input/debugging">
    Troubleshooting input issues
  </Card>
</CardGroup>
